# arcanum

#### DEPENDENCES
 - node v12.6.0+

#### Запуск приложения
```
бекенд:
node index.js -p PATH
или команда npm
npm run server -- PATH

фронтенд: npm run webpack

проверка типов: npm run type-check
```
Для использования TS, и его компиляции в JS я выбрала [способ через babel](https://devblogs.microsoft.com/typescript/typescript-and-babel-7/)

У меня не было опыта работы с TS.
Места, вызвавшие трудности, при переводе на TS:
1. Типизация redux actions
2. Типизация обработчиков(были ошибки с которыми долго разбиралась)
3. В целом иногда не понятно, что даже гуглить по ошибке
4. Чтение типов в самих библиотеках в некоторых местах

Найденные ошибки при переводе на TS
1. В INITIAL_STATE редьюсера отсутствовало поле currentBranch, но в интерфейсе значение всегда
было и все работало т.к. оно проставлялось SSR при сборе данных и формировании стейта
2. Ошибки установок зависимостей, например, react-highlight была в devDependences
3. Неверное именование пропсов внутри одного компонента - опечатки
4. Не передан пропс дочернему компоненту, он был не обязательным, но именно в этом случае его надо было передать
5. Неточность при импортировании опции из yargs - по alias

Что не понравилось:
1. Пришлось отказаться от декораторов
2. Иногда добавлять доп.условия в уже работающие функции: 
легче сразу писать на ts, чтобы потом не надо было решать таких задачек, когда функция работает,
а из-за несоответствия типов приходится добавлять какие-то условия
3. Если в ts файл импортится что-то из .js файла - не находит - надо переименовать тот js файл.
Если это index.js где происходит import|export, то ладно, но если нет, и есть дополнительная логика, то приходится
типизировать и его. Выходит не совсем верно утверждение, что можно постепенно переводить проект на ts - это зависит от связей и зависимостей в коде.

Но тем не менее, внедрение TS в существующий проект может быть комфортным и постепенно реализуемым, с начальными фильтрами проверяемых директорий(файлов), для исключения сообщений об ошибках - ошибки TS никак не влияют на работоспособность ранее написанного рабочего кода

Впечатления:

TypeScript очень гибкий язык, одно и то же можно выразить по-разному.

Требуется практика и насмотренность.

#### Решили ли вы вливать данный PR, или предпочитаете работать с JavaScript? Почему?

В общей перспективе мне бы хотелось использовать TS.
Но решение о использовании любого инструмента должно приниматься на основе анализа выгоды и рисков.
Выгода от использования TS очевидна и проверена практически - минимизируются ошибки на этапе написания кода, код становится более надежным, повышается его сопровождаемость.
Это очень хорошо для проектов, где цена ошибок высока, например, для банковских, и где разработкой занимается несколько человек.

Данный проект - учебный и над ним работаю только я. 
С учетом того, что 
- я не знаю, какие могут быть задания дальше
- существует ограничение по ресурсам(время, мои возможности), а поддержка типизации пока для меня трудозатратна
- цена ошибок в данном ПО минимальна (ракеты не падают, деньги не утекают :))
 я не стану вливать этот PR в master. 
Но типизация помогла мне найти ошибки, некоторые достаточно важные, но все они - не критичные, и они будут исправлены.


``We invest in TypeScript (or any other static type-checker) in return for predictable,
well-formed data. Any questions about those data spawns further,
uncomfortable questions about the value of our investment.
We expect TypeScript to tell us when things break.``
